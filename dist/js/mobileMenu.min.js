!function(e,t,n){function i(t,n){this.options=e.extend({},s,n),this.element=t,this.init()}var s={width:1024,next:'<span class="arrow"></span>',prev:'<span class="back-arrow">&lsaquo;</span>',linkSwitch:!1,openButonTheme:"menu",nextButonTheme:"angle-right",prevButonTheme:"angle-left",colorTheme:""};i.prototype.init=function(){function n(t){""!=c.options.colorTheme&&e(t).css({color:c.options.colorTheme})}function i(t,n,i){t.each(function(t){void 0!=e(this).attr(n)?i.push(e(this).attr(n)):i.push("")})}function s(t,n,i){t.each(function(t){var s=i[t];e(this).attr(n,s)})}function o(){e("body").toggleClass("bodyFixed"),setTimeout(function(){e(".multilevelMenu ul").attr("class","")},200)}function l(){if(!(e(".multilevelMenu").length>0))return!1;e("body").append('<span class="js-swipe"></span>');var t=0,n=0;e(".js-swipe, .multilevelMenu").on("touchstart",function(e){t=e.originalEvent.changedTouches[0].pageX}),e(".js-swipe").on("touchend",function(e){(n=e.originalEvent.changedTouches[0].pageX)>t&&(o(),r.find("ul").attr("style",""))}),e(".multilevelMenu").on("touchend",function(i){(n=i.originalEvent.changedTouches[0].pageX)<t-30&&(e("body").removeClass("bodyFixed"),setTimeout(function(){e(".multilevelMenu ul").attr("class","")},200))})}function a(){function i(e,t){e.preventDefault(),e.stopPropagation();var n=t.closest("li").children("ul"),i=n.innerHeight()+15;t.parents("ul").addClass("close-list").height(i),n.addClass("active-menu").height(i)}function o(e,t){return t.closest("li").find("li.back").text(e).prepend(c.options.prev),t.closest("li").find("li.back").find("> *").addClass("js-prev "+b)}if((t.innerWidth?t.innerWidth:e(t).width())<c.options.width){if(!T){T=!0,r.removeAttr("id"),r.removeClass(),r.addClass("multilevelMenu"),m.removeClass(),m.removeAttr("id"),g.removeClass(),w.removeClass(),l();var a=r.find("a");a.append(function(t,i){var s="";return e(this).parent("li").find("ul").length>0&&(s=c.options.next),n(".js-arrow "),e(s).addClass("js-arrow "+y)}),r.find("li").find("ul").prepend('<li class="back js-back">Назад</li>'),1==c.options.linkSwitch?e(a).on("click",function(t){e(this).next("ul").length>0&&i(t,e(this)),o(e(this).text(),e(this)),n(".js-prev")}):e(a).on("click",".js-arrow",function(t){i(t,e(this)),o(e(this).parents("a").text(),e(this)),n(".js-prev")}),e(".js-back").click(function(){var t=e(this).closest("ul.close-list"),n=0;t.children("li").each(function(t){n+=e(this).innerHeight()}),t.removeClass("close-list"),e(this).parents("ul").innerHeight(n),e(this).closest("ul").addClass("hidden-menu").attr("style","");var i=this;setTimeout(function(){e(i).closest("ul").removeClass("active-menu hidden-menu")},200)})}}else T&&(T=!1,r.attr("id",u),r.attr("class",d),r.find("ul").attr("style",""),s(m,"class",h),s(m,"id",p),s(g,"class",f),s(w,"class",v),e(".js-arrow, .js-back, .js-swipe").detach()),e("body").removeClass("bodyFixed")}var c=this,r=this.element,u=r.attr("id"),d=r.attr("class"),h=[],p=[],f=[],v=[],m=r.find("ul"),g=r.find("li"),w=r.find("a"),T=!1,j="icon-"+c.options.openButonTheme,y="icon-"+c.options.nextButonTheme,b="icon-"+c.options.prevButonTheme;i(m,"class",h),i(m,"id",p),i(g,"class",f),i(w,"class",v),e(".multimenuToggle").addClass(j),n(".multimenuToggle"),e("body").append('<div class="multilevelOverlay js-overlay"></div>'),a(),e(t).resize(function(){a()}),e(".multimenuToggle").add(e(".js-overlay")).on("click",function(){o(),r.find("ul").attr("style","")})},e.fn.mobileMenu=function(e){return new i(this.first(),e),this.first()}}(jQuery,window,document);