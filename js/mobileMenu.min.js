!function(t,s,e){function n(s,e){this.options=t.extend({},i,e),this.element=s,this.init()}var i={width:1024,next:'<span class="arrow">&rsaquo;</span>',prev:'<span class="back-arrow">&lsaquo;</span>',linkSwitch:!1,showParent:!0,backButtonText:"Назад"};n.prototype.init=function(){function e(s,e,n){s.each(function(s){void 0!=t(this).attr(e)?n.push(t(this).attr(e)):n.push("")})}function n(s,e,n){s.each(function(s){var i=n[s];t(this).attr(e,i)})}function i(){t("body").toggleClass("bodyFixed"),setTimeout(function(){t(".multilevelMenu ul").attr("class","")},400)}function l(){if(!(t(".multilevelMenu").length>0))return!1;t("body").append('<span class="js-swipe"></span>');var s=0,e=0;t(".js-swipe, .multilevelMenu").on("touchstart",function(t){s=t.originalEvent.changedTouches[0].pageX}),t(".js-swipe").on("touchend",function(t){(e=t.originalEvent.changedTouches[0].pageX)>s&&i()}),t(".multilevelMenu").on("touchend",function(n){(e=n.originalEvent.changedTouches[0].pageX)<s-20&&(t("body").removeClass("bodyFixed"),setTimeout(function(){t(".multilevelMenu ul").attr("class","")},400))})}function a(){function e(t,s){t.preventDefault(),t.stopPropagation(),s.parents("ul").addClass("close-list"),s.closest("li").children("ul").addClass("active-menu")}function i(s,e){s.length>0&&(s=s.substring(0,s.length-1)),e.closest("li").find("li.back").text(s),t(".js-back").append(o.options.prev)}if((s.innerWidth?s.innerWidth:t(s).width())<o.options.width){if(!b){b=!0,c.removeAttr("id"),c.removeClass(),c.addClass("multilevelMenu"),v.removeClass(),v.removeAttr("id"),m.removeClass(),g.removeClass(),l();var a=c.find("a");a.append(function(s,e){var n="";return t(this).parent("li").find("ul").length>0&&(n=o.options.next),t(n).addClass("js-arrow")}),c.find("li").find("ul").prepend('<li class="back js-back"></li>'),1==o.options.linkSwitch?t(a).on("click",function(s){t(this).next("ul").length>0&&e(s,t(this)),i(t(this).text(),t(this))}):t(a).on("click",".js-arrow",function(s){e(s,t(this)),i(t(this).parents("a").text(),t(this))}),t(".js-back").click(function(){t(this).closest("ul.close-list").removeClass("close-list"),t(this).closest("ul").addClass("hidden-menu");var s=this;setTimeout(function(){t(s).closest("ul").removeClass("active-menu hidden-menu")},400)})}}else b&&(b=!1,c.attr("id",u),c.attr("class",r),n(v,"class",d),n(v,"id",h),n(m,"class",f),n(g,"class",p),t(".js-arrow, .js-back, .js-swipe").detach()),t("body").removeClass("bodyFixed")}var o=this,c=this.element,u=c.attr("id"),r=c.attr("class"),d=[],h=[],f=[],p=[],v=c.find("ul"),m=c.find("li"),g=c.find("a"),b=!1;e(v,"class",d),e(v,"id",h),e(m,"class",f),e(g,"class",p),t("body").append('<div class="multilevelOverlay js-overlay"></div>'),a(),t(s).resize(function(){a()}),t(".js-toggle").add(t(".js-overlay")).on("click",function(){i()})},t.fn.mobileMenu=function(t){return new n(this.first(),t),this.first()}}(jQuery,window,document);